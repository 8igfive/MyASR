#from phkit import text2phoneme, text2sequence, symbol_chinese
#from phkit import chinese_sequence_to_text, chinese_text_to_sequence
import re
hbh=['8L9991','3U8067','3U8068','3U8229','3U8230','3U8567','3U8568','3U8571','3U8572','3U8573','3U8574','3U8575','3U8576','3U8577','3U8578','3U8759','3U8760','3U8859','3U8860','3U8901','3U8902','3U8939','3U8940','8L9671','8L9672','9H6007','9H6008','CA1253','CA1254','CA1291','CA1292','CA1293','CA1294','CA1295','CA1296','CA1781','CA1782','CA1901','CA1902','CA4153','CA4154','CA4157','CA4158','CA4191','CA4192','CA8165','CA8166','CZ321T','CZ3435','CZ3436','CZ3629','CZ3630','CZ3791','CZ3792','CZ3911','CZ3912','CZ5259','CZ5260','CZ5285','CZ5286','CZ5287','CZ5288','CZ5334','CZ5341','CZ5342','CZ5421','CZ5422','CZ5423','CZ5424','CZ5433','CZ5434','CZ6181','CZ6182','CZ6307','CZ6308','CZ6413','CZ6414','CZ6491','CZ6492','CZ6577','CZ6578','CZ6627','CZ6628','CZ6633','CZ6634','CZ6661','CZ6662','CZ6669','CZ6670','CZ6671','CZ6672','CZ6677','CZ6678','CZ6681','CZ6682','CZ6683','CZ6684','CZ6695','CZ6696','CZ6797','CZ6798','CZ6801','CZ6802','CZ6804','CZ6807','CZ6808','CZ6811','CZ6812','CZ6813','CZ6814','CZ6815','CZ6816','CZ6817','CZ6818','CZ6819','CZ6820','CZ6821','CZ6822','CZ6823','CZ6824','CZ6825','CZ6826','CZ6837','CZ6838','CZ6841','CZ6842','CZ6843','CZ6844','CZ6857','CZ6858','CZ6859','CZ6860','CZ6861','CZ6862','CZ6863','CZ6864','CZ6865','CZ6866','CZ6867','CZ6868','CZ6869','CZ6870','CZ6871','CZ6872','CZ6875','CZ6876','CZ6877','CZ6878','CZ6879','CZ6880','CZ6881','CZ6882','CZ6883','CZ6884','CZ6886','CZ6888','CZ6889','CZ6890','CZ6893','CZ6894','CZ6897','CZ6898','CZ6901','CZ6902','CZ6903','CZ6904','CZ6905','CZ6906','CZ6909','CZ6910','CZ6913','CZ6914','CZ6917','CZ6918','CZ6919','CZ6920','CZ6920','CZ6925','CZ6926','CZ6931','CZ6932','CZ6939','CZ6940','CZ6941','CZ6942','CZ6943','CZ6944','CZ6949','CZ6950','CZ6951','CZ6952','CZ6955','CZ6956','CZ6959','CZ6960','CZ6961','CZ6965','CZ6966','CZ6967','CZ6968','CZ6971','CZ6972','CZ6972A','CZ6975','CZ6976','CZ6979','CZ6981','CZ6982','CZ6987','CZ6988','CZ6995','CZ6996','CZ6998','CZ8297','CZ8298','G5111T','G54459','G54460','GJ8667','GJ8668','GJ8927','GJ8928','GS444Y','GS7475','GS7476','GS7477','GS7478','GS7493','GS7494','GS7505','GS7506','GS7507','GS7508','GS7513','GS7514','GS7521','GS7522','GS7529','GS7530','GS7535','GS7536','GS7537','GS7538','GS7549','GS7550','GS7551','GS7552','GS7555','GS7556','GS7557','GS7558','GS7559','GS7560','GS7573','GS7574','GS7575','GS7576','HO1255','HO1256','HU7145','HU7146','HU7245','HU7246','HU7387','HU7388','HU7593','HU7594','HU7813','HU7814','HU7847','HU7848','HU7855','HU7856','HU7865','HU7866','HU7875','HU7876','HU7887','HU7888','HU7897','HU7898','JD5219','JD5220','JD5843','JD5844','MF8219','MF8220','MF8229','MF8230','MF8241','MF8242','MU2299','MU2300','MU2769','MU2770','MU2783','MU2784','MU6467','MU6468','MU6835','MU6836','PN6245','PN6246','PN6269','PN6270','PN6375','PN6376','QW9799','QW9800','RY8921','RY8922','RY8939','RY8940','SC2215','SC2216','SC2239','SC2240','SC2281','SC2282','SC4611','SC4612','SC4637','SC4638','SC4903','SC4904','SC4905','SC4906','SC4911','SC4912','SC4927','SC4928','SC8059','SC8060','SC8755','SC8756','SC8809','SC8810','SC8811','SC8812','UQ2501','UQ2502','UQ2503','UQ2504','UQ2513','UQ2514','UQ2515','UQ2516','UQ2519','UQ2520','UQ2521','UQ2525','UQ2526','UQ2529','UQ2530','UQ2535','UQ2536','UQ2539','UQ2540','UQ2553','UQ2554','UQ2555','UQ2556','UQ2563','UQ2564','UQ2565','UQ2566','UQ2601','UQ2602','UQ260X','ZH9241','ZH9242','GS1001','MU1001A','CA1008Z','ZH1008Z','CZ111T','GS111E','GS111T','MU111T','UQ111T','CZ111','CZ111A','GS111A','MU111A','UQ111A','9H1111T','CA1111F','DR1111A','FU1111T','GS1111T','GS1111Z','HU1111Z','LT1111A','LT1111B','PN1111T','UQ1111A','UQ1111B','UQ1111T','UQ1111W','UQ1111Z','CZ1111','RY1111','SC1111','CZ1111T','DZ1111A','SC1111A','SC1111T','CZ112A','SC112T','UQ1234','HU1234Z','CZ1234D','GS1234N','HU1234Y','MU1234Q','CZ140S','CZ140R','CZ206Y','KN206','CZ206X','CZ222T','MU222T','UQ222T','HU222Z','JD2222A','SC2222A','UQ2222A','UQ2222R','UQ2222T','CZ2222','FU2222','QW2345A','QW2345G','QW2345M','QW2345T','QW2345X','UQ251V','UQ251X','CZ2513','UQ2513','UQ2514','CZ2514A','UQ2561','CZ2561','CZ2563','UQ2563','CZ2564','UQ2564','CZ2565','UQ2565','CZ2566','UQ2566','CZ2572','UQ2572','UQ2575','CZ2575','CZ2576','UQ2576','CZ258U','CZ258T','CZ2584','UQ2584','CZ2585','UQ2585','CZ2586','UQ2586','HU333Z','CZ333','UQ3333','CA3333A','HU3333C','HU3333W','HU3333Z','MU3333A','MU3333Z','CZ3753A','CZ3753','SC409A','SC409B','SC409C','CA415V','CA415W','CA424U','CA424W','MU4321','HU4321A','LT4321','MU444T','CA444Q','GS444Y','MU4444A','GS4444','G51118O','G5111T','G5111X','G51172C','G51172J','G52190X','JD5219','CZ523X','CZ523Y','G52798X','CZ5279','G5279X','JD5279','CZ528S','CZ528U','CZ528R','CZ528T','CZ528Z','JD5280','JD5280A','CZ5280','G53021','G53020','G53104F','G53104G','CZ534X','CZ534Y','G53796N','CZ5379','CZ538Q','CZ538Z','CZ539Q','CZ539S','CZ539R','G54345W','CZ5434','G5437T','G54376A','G5438A','G54384A','G54393A','G54393B','G549D2P','G549D2Q','G549K5E','G549L7A','G549S3L','G549U2Q','G549V0Z','G54912A','MU5491','G5492S','MU5492','G54927D','CZ555A','HU555T','G55542O','GS5554T','SC5555','UQ5555','MU5555A','GS5555','MF5555','G559K2Y','G559L9K','G561C3R','G561I1C','G561N7A','G561S7R','G56340I','MU5634','CZ566S','CZ566U','CZ566R','CZ566T','CZ5696A','CZ5696','CZ5699','MU5699','G597A0S','G597T8X','G597T8Y','G597W4B','G597X8A','CZ6001','GJ6001','CZ6007','9H6007','9H6008','GJ6008','CZ6008','CZ6015','HU6015','HU6016','HU6016A','CZ6307','PN6307','CZ661W','CZ661V','CZ663W','CZ663V','CZ666A','CZ666Q','CZ666Y','GS666T','MU666M','HU6666A','MF6666','QW6666','CZ6666T','CZ667Q','CZ667S','CZ667R','CZ667U','CZ668V','CZ668W','CZ668Y','CZ668X','CZ668Z','CZ669Q','CZ669U','CZ669T','CZ680Q','CZ680S','CZ680U','CZ680W','CZ680Y','CZ680R','CZ680T','CZ680V','CZ680X','CZ6802','CZ6802A','CZ6806','CZ6806A','CZ681U','CZ681W','CZ681Y','CZ681R','CZ681T','CZ681V','CZ681X','CZ681Z','CZ682S','CZ682U','CZ682W','CZ682Y','CZ682R','CZ682T','CZ682V','CZ682X','CZ682Z','CZ683Q','CZ683X','CZ684W','CZ684Y','CZ684T','CZ684V','CZ684X','CZ684Z','CZ6842','CZ6842A','CZ685S','CZ685R','CZ686Q','CZ686S','CZ686U','CZ686W','CZ686R','CZ686T','CZ687Q','CZ687T','CZ687Z','CZ688T','CZ688U','CZ688W','CZ688R','CZ688V','CZ688X','CZ688Z','CZ6885A','CZ6885','CZ6886A','CZ6886','CZ6888','HU6888T','CZ689R','CZ689W','CZ689Z','CZ6893A','CZ6893','CZ690R','CZ690W','CZ690Y','CZ690S','CZ690V','CZ690X','CZ6901','CZ6901A','CZ6903','CZ6903A','CZ6906A','CZ6906','CZ6908A','CZ6908','CZ691R','CZ691Z','CZ692Y','CZ692Z','CZ6920A','CZ6920','CZ6925A','CZ6925','CZ6931A','CZ6931','CZ695Q','CZ695V','CZ695T','CZ695W','CZ695X','CZ696T','CZ696U','CZ696Z','CZ697W','CZ697V','CZ697Y','CZ6972A','CZ6972','CZ698S','CZ698U','CZ698Y','CZ698R','CZ698T','CZ698X','CZ698Z','CZ699R','CZ699S','CZ6998A','CZ6998','GS751S','GS751R','GS7535','GS7535W','GS755E','GS755W','GS755T','GS755V','GS7553','GS7553A','GS7554','GS7554A','GS7568','GS7568A','GS7577','GS7577E','CZ777T','CZ777X','CZ777Y','CZ777A','GS777T','GS7827','GS7827A','GS784Z','HU784V','HU785U','HU785Z','CZ796R','CZ796Q','CA8166','HU8166','3U8229','MF8229','CZ823Y','CZ823X','3U8230','MF8230','CA8241','MF8241','CA8242','MF8242','3U8321','CZ8321','3U857S','CZ857Y','3U8571','CZ8571','CZ8572','3U8572','3U8577','3U8577A','9C8657','CZ8657A','CZ8657','9C8658','CZ8658','CZ8751','Y87519','Y87520','CZ8752','3U8759','Y87598','Y87597','3U8759A','3U8760','3U8760A','CZ881S','SC881A','SC8825','SC8825Y','MU888B','UQ888Z','BK888Z','CZ888Q','MU888A','MU888C','3U8939','RY8939','RY8940','3U8940','FM922Z','FM922V','FM922Y','8L967X','8L967Y','MU9692C','MU9692E','CA999A','MU999A','UQ999A','UQ999B','BK999E','GS999B','GS999T','HU9999A','HU9999B','HU9999J','HU9999X','UQ9999A','UQ9999X','UQ9999Z','3U9999','GS9999T']

#text = "但又"
'''
hbh = ['8L9991']
hbhnum = []
with open(r'/home/yuma/asrt/asrt/webasrt/OpenTransformer/航班号.txt','r',encoding='utf-8') as f:
    lines=f.readlines()
    for line in lines:
        line=line.strip()
        hbh.append(line)
        hbhnum.append(line[2:6])
'''
def modi(s):
    for i in hbh:
        
        if i.find(s[2:6])!=-1:
            return i
    return s

def hasfn(s):
    nums = re.findall('\d{4,4}(?!\d)',s)
    fns = []
    for i in nums:
        if int(i)>=2099 and int(i)<=9999: 
            fns.append(i)
    if len(fns)>0:
        return fns
    return False


def pre(test):
    fns = hasfn(test)
    #print(fns)
    sted = []
    if fns:
        fns = set(hasfn(test))
        for fn in fns:
            sted+=re.finditer(fn,test)
    #print(fns)
    for i in sted:
        
        li = i.span()
        #print(li)
        #print(test[li[0]-2:li[1]])
        #print(modi(test[li[0]-2:li[1]]))
        if li[0]>2:
            test = test[:li[0]-2]+modi(test[li[0]-2:li[1]])+test[li[1]:] 
        else:
            
            test = modi(test[:li[1]] )+test[li[1]:] 
    return test
    #print(test)

if __name__ == '__main__':
    #test = '8幺9991是不是飞机延误到凌晨三点以后啊'
    test = '368067航班正不正常'
    print(pre(test))
    #test = '368067'
    #result = text2phoneme(text)
    #print(result)

